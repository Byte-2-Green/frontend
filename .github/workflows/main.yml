name: CI for CO2 App Frontend
 
on: 
  push: 
    branches: 
      - main
 
jobs: 
  build: 
    runs-on: ubuntu-22.04
 
    steps: 
    - name: Checkout code 
      uses: actions/checkout@v3
 
    - name: Set up Node.js 
      uses: actions/setup-node@v3 
      with: 
        node-version: 18
 
    - name: Install dependencies 
      run: npm install
 
    - name: Run linter 
      run: npm run lint
 
    - name: Run tests 
      run: npm test
 
    - name: Build the app 
      run: npm run build
 
    - name: Trigger backend deployment 
      run: | 
        curl -X POST \
        -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
        --data '{"event_type": "deploy-backend"}' \
        https://github.com/Byte-2-Green/backend/dispatches
